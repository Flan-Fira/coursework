head	1.9;
access;
symbols;
locks;
comment	@# @;


1.9
date	2011.01.19.18.47.32;	author dmfrank;	state -;
branches;
next	1.8;

1.8
date	2011.01.19.18.38.01;	author dmfrank;	state -;
branches;
next	1.7;

1.7
date	2011.01.18.13.58.13;	author dmfrank;	state -;
branches;
next	1.6;

1.6
date	2011.01.18.13.46.03;	author dmfrank;	state -;
branches;
next	1.5;

1.5
date	2011.01.18.13.41.51;	author dmfrank;	state -;
branches;
next	1.4;

1.4
date	2010.12.16.06.56.53;	author -;	state -;
branches;
next	1.3;

1.3
date	2010.12.16.06.55.09;	author dmfrank;	state -;
branches;
next	1.2;

1.2
date	2010.12.16.06.35.25;	author dmfrank;	state -;
branches;
next	1.1;

1.1
date	2010.12.16.06.28.54;	author dmfrank;	state -;
branches;
next	;


desc
@@


1.9
log
@-
@
text
@# $Id: Makefile,v 1.8 2011-01-19 10:38:01-08 dmfrank - $
# Derek Frank, dmfrank@@ucsc.edu
# Assignment 1

MKFILE      = Makefile
DEPSFILE    = ${MKFILE}.deps
NOINCL      = ci clean spotless
NEEDINCL    = ${filter ${NOINCL}, ${MAKECMDGOALS}}
GMAKE       = ${MAKE} --no-print-directory
UNAME      ?= ${shell uname -s}

ifeq (${UNAME},SunOS)
COMPILECCC  = CC -g -features=extensions
MAKEDEPSCCC = CC -xM1
endif
ifeq (${UNAME},Linux)
COMPILECCC  = g++ -g -Wall -Wextra -Werror
MAKEDEPSCCC = g++ -MM
endif
ifeq (${UNAME},Darwin)
COMPILECCC  = g++ -g -Wall -Wextra -Werror
MAKEDEPSCCC = g++ -MM
endif

CCSOURCE    = commands.cpp inode.cpp trace.cpp util.cpp yshell.cpp
CCHEADER    = commands.h  inode.h  trace.h  util.h
EXECBIN     = yshell
OBJECTS     = ${CCSOURCE:.cpp=.o}
OTHERS      = ${MKFILE} README
ALLSOURCES  = ${CCHEADER} ${CCSOURCE} ${OTHERS}
LISTING     = ../asg1-shell.code.ps
CLASS       = cmps109-wm.w11
PROJECT     = asg1

all : ${EXECBIN}

${EXECBIN} : ${OBJECTS}
	${COMPILECCC} -o $@@ ${OBJECTS}
	- checksource ${CCSOURCE}

%.o : %.cpp
	cil + $<
	${COMPILECCC} -c $<

ci : ${ALLSOURCES}
	- checksource ${ALLSOURCES}
	cil + ${ALLSOURCES}

lis : ${ALLSOURCES}
	mkpspdf ${LISTING} ${ALLSOURCES} ${DEPSFILE}

clean :
	- rm ${OBJECTS} ${DEPSFILE} core ${EXECBIN}.errs

spotless : clean
	- rm ${EXECBIN} 

submit : ${ALLSOURCES}
	- checksource ${ALLSOURCES}
	submit ${CLASS} ${PROJECT} ${ALLSOURCES}
	testsubmit ${CLASS} ${PROJECT} ${ALLSOURCES}

deps : ${CCSOURCE} ${CCHEADER}
	@@ echo "# ${DEPSFILE} created `LC_TIME=C date`" >${DEPSFILE}
	${MAKEDEPSCCC} ${CCSOURCE} | sort | uniq >>${DEPSFILE}

${DEPSFILE} :
	@@ touch ${DEPSFILE}
	${MAKE} deps

again :
	gmake --no-print-directory spotless deps ci all lis

ifeq (${NEEDINCL}, )
include ${DEPSFILE}
endif

@


1.8
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.7 2011-01-18 05:58:13-08 dmfrank - $
d71 2
a72 2
#again :
#	gmake --no-print-directory spotless deps ci all lis
@


1.7
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.6 2011-01-18 05:46:03-08 dmfrank - $
d58 4
a61 4
#submit : ${ALLSOURCES}
#	- checksource ${ALLSOURCES}
#	submit ${CLASS} ${PROJECT} ${ALLSOURCES}
#	testsubmit ${CLASS} ${PROJECT} ${ALLSOURCES}
@


1.6
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.5 2011-01-18 05:41:51-08 dmfrank - $
d42 1
a42 1
	cid + $<
d47 1
a47 1
	cid + ${ALLSOURCES}
@


1.5
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.2 2011-01-17 10:28:15-08 dmfrank - $
d39 1
a39 1
#	- checksource ${CCSOURCE}
d42 1
a42 1
#	cid + $<
d45 3
a47 3
#ci : ${ALLSOURCES}
#	- checksource ${ALLSOURCES}
#	cid + ${ALLSOURCES}
d53 1
a53 1
	- rm ${OBJECTS} ${DEPSFILE} ${EXECBIN} ${EXECBIN}.errs
@


1.4
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.3 2010-12-15 22:55:09-08 dmfrank - $
d20 4
d25 1
a25 1
CCSOURCE    = commands.cc inode.cc trace.cc util.cc yshell.cc
d28 1
a28 1
OBJECTS     = ${CCSOURCE:.cc=.o}
d39 1
a39 1
	- checksource ${CCSOURCE}
d41 2
a42 2
%.o : %.cc
	cid + $<
d45 3
a47 3
ci : ${ALLSOURCES}
	- checksource ${ALLSOURCES}
	cid + ${ALLSOURCES}
d53 1
a53 1
	- rm ${OBJECTS} ${DEPSFILE} core ${EXECBIN}.errs
d58 4
a61 4
submit : ${ALLSOURCES}
	- checksource ${ALLSOURCES}
	submit ${CLASS} ${PROJECT} ${ALLSOURCES}
	testsubmit ${CLASS} ${PROJECT} ${ALLSOURCES}
d69 1
a69 1
	${GMAKE} deps
d71 2
a72 2
again :
	gmake --no-print-directory spotless deps ci all lis
@


1.3
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.2 2010-12-15 22:35:25-08 dmfrank - $
a44 4
cil : ${ALLSOURCES}
	- checksource ${ALLSOURCES}
	cil + ${ALLSOURCES}

@


1.2
log
@-
@
text
@d1 1
a1 1
# $Id: Makefile,v 1.1 2010-12-15 22:28:54-08 dmfrank - $
d45 4
@


1.1
log
@-
@
text
@d1 3
a3 1
# $Id: Makefile,v 1.4 2010-12-13 20:12:44-08 - - $
@
